# GUI Design

This document outlines the user interface architecture and components using PySide6.

## 1. Framework Choice

- **PySide6**: Official Qt for Python bindings, used for all UI components.

## 2. Main Window Layout

The application features a modern, pipeline-driven UI built around a main `QSplitter` that divides the window into three key areas:

- **Setup Panel (Left)**: This is the primary control panel where the user defines the entire analysis. It is managed by the `SetupPanelController`. It contains controls for:
    - **Source Selection**: Radio buttons to choose between a single image, a batch folder, or a live camera.
    - **Pipeline Selection**: A dropdown menu (`pipelineCombo`) to select the desired analysis pipeline (e.g., "Pendant Drop", "Sessile Drop").
    - **Stage Configuration**: A list of the stages for the selected pipeline. Each stage has buttons to run it individually or configure its parameters in a separate dialog.
    - **Execution**: A "Run All" button to execute the full pipeline.

- **Preview Panel (Center)**: A large panel that displays the source image or camera feed. It uses a custom `ImageView` widget to render the image and any graphical overlays (e.g., detected contours, ROIs, fitted lines) generated by the analysis pipeline.

- **Results Panel (Right)**: A panel dedicated to displaying the final numerical results and metrics produced by the pipeline.

This design is highly flexible, as the UI dynamically adapts to the stages and parameters of whichever pipeline the user selects.

## 3. Configuration Dialogs

Menipy utilizes dedicated dialogs for configuring various pipeline stages, accessible from the Setup Panel. These dialogs provide granular control over parameters.

-   **Preprocessing Configuration Dialog**: Allows users to adjust settings for image cropping, resizing, filtering, background subtraction, and normalization.
-   **Edge Detection Configuration Dialog**: Provides extensive controls for edge detection algorithms (Canny, Threshold, Sobel, Active Contour, etc.) and contour refinement.

## 4. Image Display & Overlays

- The `ImageView` widget, a subclass of `QGraphicsView`, is used for all image rendering.
- Overlays like contours, points, and lines are drawn as `QGraphicsPathItem` or similar objects on the scene, which allows them to be toggled and updated without re-rendering the base image.

## 5. Saving & Export

- **Save Annotated Image**: Functionality is provided to save the current view from the Preview Panel, including all overlays.
- **Export Results**: The data from the Results Panel can be exported, typically to a CSV file.